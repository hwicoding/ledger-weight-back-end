# 배포 전 확인 사항 답변 보고서

**작성일**: 2025-12-11  
**작성자**: 백엔드 개발자  
**대상**: 서버 담당자

---

## 📋 확인 사항 답변

### 1. 프로젝트 레포지토리 정보

#### ✅ GitHub 레포지토리 URL
- **상태**: ⚠️ **확정 필요**
- **현재**: 가이드 문서에 `https://github.com/[username]/ledger-weight-back-end`로 표시됨
- **액션**: 실제 GitHub 레포지토리 URL 확인 후 업데이트 필요
- **브랜치**: `main` (예상)

#### ✅ 레포지토리 접근 권한
- **상태**: ⚠️ **확정 필요**
- **확인 필요**: Private/Public 여부
- **권장**: Private 레포지토리 + GitHub Actions Secrets 사용

---

### 2. 필수 파일 존재 여부

#### ✅ `requirements.txt`
- **상태**: ✅ **존재 및 최신 상태**
- **경로**: `requirements.txt`
- **내용**: FastAPI, uvicorn, websockets, pydantic 등 필수 패키지 포함
- **버전**: 모든 패키지 버전 명시됨

#### ⚠️ `.env` 파일
- **상태**: ❌ **존재하지 않음**
- **액션 필요**: 
  - `.env.example` 또는 `.env.template` 파일 생성 필요
  - `.gitignore`에 `.env` 포함 확인 필요

#### ✅ `app/main.py`
- **상태**: ✅ **존재**
- **경로**: `app/main.py`
- **내용**: FastAPI 앱 진입점, WebSocket 엔드포인트 포함

#### ✅ 프로젝트 루트 디렉토리 구조
- **상태**: ✅ **정상**
- **구조**:
  ```
  ledger-weight-back-end/
  ├── app/              # 애플리케이션 코드
  ├── docs/             # 문서
  ├── logs/             # 작업일지
  ├── tests/            # 테스트
  ├── requirements.txt  # 의존성
  └── README.md         # 프로젝트 설명
  ```

---

### 3. 환경 변수 설정 정보

#### ✅ `app/config.py`에 정의된 환경 변수
- **상태**: ✅ **정의됨**
- **파일**: `app/config.py` (Pydantic Settings 사용)

#### 환경 변수 목록 및 기본값:

| 변수명 | 기본값 | 설명 | 가이드와 일치 여부 |
|--------|--------|------|-------------------|
| `HOST` | `"0.0.0.0"` | 서버 호스트 | ✅ 일치 |
| `PORT` | `8000` | 서버 포트 | ⚠️ 가이드는 8080 |
| `DEBUG` | `False` | 디버그 모드 | ✅ 일치 |
| `CORS_ORIGINS` | `["*"]` | CORS 허용 오리진 | ✅ 일치 |
| `WS_MAX_CONNECTIONS` | `100` | 최대 WebSocket 연결 수 | ✅ 일치 |
| `WS_HEARTBEAT_INTERVAL` | `30` | WebSocket 하트비트 간격(초) | ✅ 일치 |
| `MAX_PLAYERS` | `7` | 최대 플레이어 수 | ✅ 일치 |
| `MIN_PLAYERS` | `4` | 최소 플레이어 수 | ✅ 일치 |
| `APP_NAME` | `"장부의 무게 API"` | 애플리케이션 이름 | ✅ 일치 |
| `APP_VERSION` | `"0.1.0"` | 버전 | ✅ 일치 |

#### ⚠️ 포트 불일치
- **문제**: `app/config.py`의 기본값은 `8000`, 가이드는 `8080` 사용
- **해결**: `.env` 파일에서 `PORT=8080` 설정 필요
- **액션**: `.env.example` 파일 생성 시 `PORT=8080` 명시

---

### 4. 서버 실행 명령어 확인

#### ✅ 실행 명령어
- **상태**: ✅ **확인됨**
- **명령어**: `uvicorn app.main:app --host 0.0.0.0 --port 8080`
- **가이드와 일치**: ✅ (단, PORT는 환경 변수로 설정)

#### ✅ 프로덕션 실행 방식
- **현재**: `uvicorn app.main:app --host 0.0.0.0 --port 8080`
- **권장 옵션**:
  - `--workers 4`: 워커 프로세스 수 (선택사항)
  - `--no-access-log`: 접근 로그 비활성화 (선택사항)
  - `--log-level info`: 로그 레벨 설정
- **개발 모드**: `--reload` 옵션 사용 (프로덕션에서는 제외)

#### ✅ `app/main.py` 직접 실행
- **코드 확인**: `if __name__ == "__main__"` 블록 존재
- **실행 방식**: `python app/main.py` (환경 변수 자동 로드)

---

### 5. WebSocket 엔드포인트 확인

#### ✅ WebSocket 엔드포인트
- **상태**: ✅ **구현됨**
- **경로**: `/ws/{player_id}`
- **파일**: `app/main.py` (53-116줄)
- **기능**: 
  - 플레이어 ID 기반 연결
  - 메시지 수신/전송
  - 연결 해제 처리

#### ⚠️ 로비 엔드포인트
- **상태**: ❌ **아직 미구현**
- **요구사항**: `/lobby/{game_id}?player={playerName}` (프론트엔드 요청)
- **현재**: `/ws/{player_id}`만 존재
- **액션**: 로비 엔드포인트 추가 필요 (향후 작업)

---

### 6. 헬스 체크 엔드포인트

#### ✅ 헬스 체크 엔드포인트
- **상태**: ✅ **구현됨**
- **경로**: `/health`
- **파일**: `app/main.py` (47-50줄)
- **응답**: `{"status": "healthy"}`
- **가이드와 일치**: ✅

#### ✅ 루트 엔드포인트
- **경로**: `/`
- **응답**: 서버 정보 및 상태
- **용도**: 기본 접속 확인용

---

### 7. 프로젝트 배포 준비 상태

#### ✅ 배포 가능 상태
- **상태**: ✅ **기본 배포 가능**
- **확인 사항**:
  - ✅ 핵심 기능 구현 완료
  - ✅ 필수 파일 존재
  - ✅ 의존성 정의 완료
  - ⚠️ `.env` 파일 템플릿 필요
  - ⚠️ 로비 엔드포인트 추가 필요 (프론트엔드 연동 시)

#### ⚠️ 배포 전 추가 작업 필요

1. **`.env.example` 파일 생성**
   ```env
   # 서버 설정
   HOST=0.0.0.0
   PORT=8080
   
   # 애플리케이션 설정
   APP_NAME=장부의 무게 API
   APP_VERSION=0.1.0
   DEBUG=False
   
   # CORS 설정
   CORS_ORIGINS=["*"]
   
   # WebSocket 설정
   WS_MAX_CONNECTIONS=100
   WS_HEARTBEAT_INTERVAL=30
   
   # 게임 설정
   MAX_PLAYERS=7
   MIN_PLAYERS=4
   ```

2. **GitHub 레포지토리 URL 확정**
   - 실제 레포지토리 URL 확인
   - 가이드 문서 업데이트

3. **로비 엔드포인트 구현** (선택사항, 프론트엔드 연동 시 필요)
   - `/lobby/{game_id}` 엔드포인트 추가

#### ✅ 브랜치/태그
- **기본 브랜치**: `main` (예상)
- **배포 브랜치**: `main` 브랜치 사용 권장
- **태그**: 현재 없음 (필요 시 추가 가능)

---

## 📝 요약

### ✅ 준비 완료 항목
1. ✅ `requirements.txt` 존재 및 최신 상태
2. ✅ `app/main.py` 진입점 존재
3. ✅ 프로젝트 구조 정상
4. ✅ 환경 변수 정의 완료 (`app/config.py`)
5. ✅ 헬스 체크 엔드포인트 구현 (`/health`)
6. ✅ WebSocket 엔드포인트 구현 (`/ws/{player_id}`)
7. ✅ 실행 명령어 확인

### ⚠️ 추가 작업 필요 항목
1. ⚠️ `.env.example` 파일 생성
2. ⚠️ GitHub 레포지토리 URL 확정
3. ⚠️ 포트 설정 확인 (기본값 8000 → 8080으로 환경 변수 설정)
4. ⚠️ 로비 엔드포인트 구현 (프론트엔드 연동 시 필요)

### ❌ 미완료 항목
1. ❌ `.env` 파일 (템플릿 필요)
2. ❌ 로비 엔드포인트 (`/lobby/{game_id}`)

---

## 🚀 다음 단계 제안

### 즉시 진행 가능
1. **`.env.example` 파일 생성** (5분)
2. **GitHub 레포지토리 URL 확인 및 업데이트** (5분)
3. **기본 배포 테스트** (NAS 서버에서)

### 향후 작업
1. 로비 엔드포인트 구현 (프론트엔드 연동 전)
2. GitHub Actions CI/CD 설정
3. 프로덕션 환경 최적화

---

## 📌 결론

**배포 준비 상태**: ✅ **기본 배포 가능**

현재 프로젝트는 기본적인 배포가 가능한 상태입니다. 다만 다음 사항들을 확인/준비하면 더 원활한 배포가 가능합니다:

1. `.env.example` 파일 생성 (서버 담당자가 `.env` 파일 생성 시 참고용)
2. GitHub 레포지토리 URL 확정
3. 포트 설정 확인 (8080 사용)

로비 엔드포인트는 프론트엔드 연동 시 필요하므로, 기본 배포 후 추가 구현 가능합니다.

---

**작성자**: 백엔드 개발자  
**최종 업데이트**: 2025-12-11

